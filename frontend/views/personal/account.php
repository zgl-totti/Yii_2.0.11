
<style type="text/css">
    input{padding-left:10px;padding-right:10px;}
</style>
<div style="width:960px;float: left;height:800px;margin-top:-10px;">
    <div id="title" style="height:40px;line-height:40px;font-size:20px;margin-top:15px;padding-left:40px;">
        <span style="cursor:pointer;border-bottom:2px solid red;">修改密码</span>
        <span style="margin-left:10px;cursor:pointer">账户余额</span>
        <span style="margin-left:10px;cursor:pointer">支付密码</span>
    </div>
    <div id="box">
        <div class="content" style="display:block;width:900px;height:500px;border:1px solid gray;padding-top:20px;">
            <span style="padding-left:30px;line-height:40px;font-size:16px;color:red;font-weight: bolder">设置登录密码:</span>
            <div style="height:400px;margin-left:30px;margin-top:20px;">
                <form action="#" method="post" id="accountForm1">
                    <div style="height:40px;margin-top:30px;">
                        <span style="margin-left:150px;padding-left:30px;line-height:40px;font-size:20px;">用户名:</span>
                        <span style="padding-left:30px;font-size:20px;color:red">
                            <?=\yii\helpers\Html::encode($info->username);?>
                            <!--<input name="password" type="text">-->
                        </span>
                    </div>
                    <div style="height:40px;margin-top:10px;">
                        <span style="margin-left:150px;padding-left:30px;line-height:40px;font-size:20px;">原密码:</span>
                        <span style="padding-left:30px;font-size:20px;"><input placeholder="请输入原密码" name="password" type="password"></span>
                    </div>
                    <div style="height:40px;margin-top:10px;">
                        <span style="margin-left:150px;padding-left:30px;line-height:40px;font-size:20px;">新密码:</span>
                        <span style="padding-left:30px;font-size:20px;"><input placeholder="请输入新密码" name="newPwd" type="password"></span>
                    </div>
                    <div style="height:40px;margin-top:10px;">
                        <span style="margin-left:150px;padding-left:8px;line-height:40px;font-size:20px;">确认密码:</span>
                        <span style="padding-left:30px;font-size:20px;"><input placeholder="请输入确认密码" name="reNewPwd" type="password"></span>
                    </div>
                    <div style="height:40px;margin-top:10px;">
                        <span style="padding-left:30px;margin-left:260px;font-size:16px;">
                            <input id="editlogin" style="cursor: pointer;width:100px;height:30px;"  type="button" value="确认修改">
                        </span>
                    </div>
                </form>
            </div>
        </div>
        <div class="content" style="display:none;width:900px;height:500px;border:1px solid gray;padding-top:20px;">
            <span style="padding-left:30px;line-height:40px;font-size:16px;color:green;font-weight: bolder">余额查看:</span>
            <div style="height:400px;margin-left:30px;margin-top:20px;">
                <form action="#" method="post" id="accountForm3">
                    <div style="height:40px;margin-top:30px;">
                        <span style="margin-left:150px;padding-left:30px;line-height:40px;font-size:20px;">账号:</span>
                        <span style="padding-left:30px;font-size:20px;color:green">
                            <?=\yii\helpers\Html::encode($info->username);?>
                            <!--<input name="password" type="text">-->
                        </span>
                    </div>
                    <div style="height:40px;margin-top:10px;">
                        <span style="margin-left:150px;padding-left:30px;line-height:40px;font-size:20px;">余额:</span>
                        <span style="padding-left:30px;font-size:20px;color:red">
                            <?=\yii\helpers\Html::encode($info->money);?>
                            <!--<input disabled="disabled" name="password" type="text">-->
                        </span>
                    </div>
                    <div style="height:40px;margin-top:10px;">
                        <span style="margin-left:150px;padding-left:30px;line-height:40px;font-size:20px;">充值:</span>
                        <span style="padding-left:30px;font-size:16px;">
                            <input name="pay" value="1" type="radio">&nbsp;支付宝
                            <input name="pay" value="2" type="radio">&nbsp;银行卡
                            <input name="pay" value="3" type="radio">&nbsp;微信
                            <input name="pay" value="4" type="radio">&nbsp;QQ红包
                        </span>
                    </div>
                    <div style="height:40px;margin-top:10px;">
                        <span style="margin-left:125px;padding-left:8px;line-height:40px;font-size:20px;">充值金额:</span>
                        <span style="padding-left:30px;font-size:20px;">
                            <input placeholder="请输入金额" name="money" type="text">
                        </span>
                    </div>
                    <div style="height:40px;margin-top:10px;">
                        <span style="padding-left:30px;margin-left:260px;font-size:16px;">
                            <input id="accountAdd" style="cursor: pointer;width:100px;height:30px;" type="button" value="确认充值">
                        </span>
                    </div>
                </form>
            </div>
        </div>
        <div class="content" style="display:none;width:900px;height:500px;border:1px solid gray;padding-top:20px;">
            <span style="padding-left:30px;line-height:40px;font-size:16px;color:blue;font-weight: bolder">设置支付密码:</span>
            <div style="height:400px;margin-left:30px;margin-top:20px;">
                <form action="#" method="post" id="accountForm2">
                    <div style="height:40px;margin-top:30px;">
                        <span style="margin-left:150px;padding-left:30px;line-height:40px;font-size:20px;">用户名:</span>
                        <span style="padding-left:30px;font-size:20px;color:blue">
                            <?=\yii\helpers\Html::encode($info->username);?>
                            <!--<input name="password" type="text">-->
                        </span>
                    </div>
                    <div style="height:40px;margin-top:10px;">
                        <span style="margin-left:150px;padding-left:30px;line-height:40px;font-size:20px;">原密码:</span>
                        <span style="padding-left:30px;font-size:20px;"><input placeholder="请输入原密码" name="paypwd" type="password"></span>
                    </div>
                    <div style="height:40px;margin-top:10px;">
                        <span style="margin-left:150px;padding-left:30px;line-height:40px;font-size:20px;">新密码:</span>
                        <span style="padding-left:30px;font-size:20px;"><input placeholder="请输入新密码" name="newpaypwd" type="password"></span>
                    </div>
                    <div style="height:40px;margin-top:10px;">
                        <span style="margin-left:150px;padding-left:8px;line-height:40px;font-size:20px;">确认密码:</span>
                        <span style="padding-left:30px;font-size:20px;"><input placeholder="请输入确认密码" name="renewpaypwd" type="password"></span>
                    </div>
                    <div style="height:40px;margin-top:10px;">
                        <span style="padding-left:30px;margin-left:260px;font-size:16px;">
                            <input id="editpay" style="cursor: pointer;width:100px;height:30px;" type="button" value="确认修改">
                        </span>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
<div style="clear:both"></div>
<?=\yii\helpers\Html::jsFile('@web/js/jquery.validate.js')?>
<script type="text/javascript">
    $(function(){
        var Obj=$("#accountForm1").validate({
            rules:{
                password:{
                    required:true,
                    minlength:2,
                    maxlength:12
                },
                newPwd:{
                    required:true,
                    minlength:2,
                    maxlength:12
                },
                reNewPwd:{
                    required:true,
                    minlength:2,
                    maxlength:12
                }
            },
            messages:{
                password:{
                    required:"原密码必须填写",
                    minlength:"最少长度为两个字符",
                    maxlength:"最大长度为十二个字符"
                },
                newPwd:{
                    required:"新密码必须填写",
                    minlength:"最少长度为两个字符",
                    maxlength:"最大长度为十二个字符"
                },
                reNewPwd:{
                    required:"确认密码必须填写",
                    minlength:"最少长度为两个字符",
                    maxlength:"最大长度为十二个字符"
                }
            }
        })
        //修改登录密码
        $("#editlogin").click(function(){
            if(Obj.form()){
                $.post("<?=\yii\helpers\Url::to(['account/change-pwd'])?>",$("#accountForm1").serialize(),function(res){
                    if(res.code==1){
                        layer.msg(res.body,{icon:1,time:2000},function(){
                            window.location.href="<?=\yii\helpers\Url::to(['personal/account'])?>";
                        })
                    }else{
                        layer.msg(res.body,{icon:2,time:2000});
                    }
                },'json')
            }
        })
    })

    $(function(){
        var Obj=$("#accountForm2").validate({
            rules:{
                paypwd:{
                    required:true,
                    minlength:6,
                    maxlength:12
                },
                newpaypwd:{
                    required:true,
                    minlength:6,
                    maxlength:12
                },
                renewpaypwd:{
                    required:true,
                    minlength:6,
                    maxlength:12
                }
            },
            messages:{
                paypwd:{
                    required:"原密码必须填写",
                    minlength:"最少长度为六个字符",
                    maxlength:"最大长度为十二个字符"
                },
                newpaypwd:{
                    required:"新密码必须填写",
                    minlength:"最少长度为六个字符",
                    maxlength:"最大长度为十二个字符"
                },
                renewpaypwd:{
                    required:"确认密码必须填写",
                    minlength:"最少长度为六个字符",
                    maxlength:"最大长度为十二个字符"
                }
            }
        })
        //修改支付密码
        $("#editpay").click(function(){
            if(Obj.form()){
                $.post("<?=\yii\helpers\Url::to(['account/pay-pwd'])?>",$("#accountForm2").serialize(),function(res){
                    if(res.code==1){
                        layer.msg(res.body,{icon:1,time:2000},function(){
                            window.location.href="<?=\yii\helpers\Url::to(['personal/account'])?>";
                        })
                    }else{
                        layer.msg(res.body,{icon:2,time:2000});
                    }
                },'json')
            }
        })
        //余额充值
        $("#accountAdd").click(function(){
            $.post("<?=\yii\helpers\Url::to(['account/recharge'])?>",$("#accountForm3").serialize(),function(res){
                if(res.code==1){
                    layer.msg(res.body,{icon:1,time:2000},function(){
                        window.location.href="<?=\yii\helpers\Url::to(['personal/account'])?>";
                    })
                }else{
                    layer.msg(res.body,{icon:2,time:2000});
                }
            },'json')
        })
    })
</script>
<script type="text/javascript">
    $("#title").children("span").click(function(){
        var num=$(this).index();
        $(this).css("borderBottom","2px solid red").siblings().css("borderBottom","0");
        $(".content").eq(num).css("display","block").siblings().css("display","none");
    })
</script>